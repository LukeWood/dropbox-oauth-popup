<!DOCTYPE html>
<html>

<head>
    <script rel="stylesheet" src="styles.css"></script>
    <script src="https://cdn.jsdelivr.net/npm/promise-polyfill@7/dist/polyfill.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dropbox/dist/Dropbox-sdk.js"></script>
    <script src="src/dropboxPopup.js"></script>
</head>

<body>
    <div>
        <h1>Dropbox OAuth Popup Window Example</h1>
        <button onclick="runAuth()">Run Example</button>
        <p id="result"></p>
        <script>
            const popup = new DropboxPopup({
                clientId: 'XXXXXXXXXX',
                clientSecret: 'XXXXXXXXXX',
                redirectUri: 'https://XXXXXXXXXX'
            });
            function runAuth() {
                popup.authUser((auth) => {
                    const dbx = new Dropbox.Dropbox(auth);
                    dbx.usersGetCurrentAccount()
                        .then((response) => {
                            document.getElementById("result").innerHTML = result.result;
                        })
                        .catch((error) => {
                            console.error(error);
                        });
                });
            }
        </script>
    </div>
</body>

</html>